{% extends 'base.html'%}
{% load static %}
{% block content %}
{% load static %}
{% load crispy_forms_tags %}
<!-- Page content-->
<!-- form for food input, micronutrient visualizations -->
<form method="post" action="{% url 'tracker' %}">
    {% csrf_token %}
    <section class="py-5">
        <div class="container px-5">
            <!-- Contact form-->
            <div class="bg-light rounded-3 py-5 px-4 px-md-5 mb-5">
                <div class="text-center mb-5">
                    <div class="feature bg-primary bg-gradient text-white rounded-3 mb-3"><i class="bi bi-envelope"></i></div>
                    <h1 class="fw-bolder">Log Your Meal</h1>
                    <p class="lead fw-normal text-muted mb-0">Fill out the Form Below</p>
                </div>
                <div class="row gx-5 justify-content-center">
                    <div class="col-lg-8 col-xl-6">
                    <!-- * * * * * * * * * * * * * * *-->
                    <!-- * * SB Forms Contact Form * *-->
                    <!-- * * * * * * * * * * * * * * *-->
                    <!-- This form is pre-integrated with SB Forms.-->
                    <!-- To make this form functional, sign up at-->
                    <!-- https://startbootstrap.com/solution/contact-forms-->
                    <!-- to get an API token!-->
                        <form id="contactForm" data-sb-form-api-token="API_TOKEN">
                        <!-- Date input -->
                            <h5>Select Date of Meal:</h5>
                            <div class="form-floating mb-3">
                                <input class="form-control" id="dtMeal" type="date" placeholder="Enter the date..." data-sb-validations="required" />
                                <label for="dtMeal">Date:</label>
                            </div>
                        <!-- Meal type input -->
                            <div>
                                <h5>Select Meal Type:</h5>
                                <input type="radio" id="rbBreakfast" name="meal_type" value="breakfast">
                                <label for="rbBreakfast">Breakfast</label><br>
                                <input type="radio" id="rbLunch" name="meal_type" value="lunch">
                                <label for="rbLunch">Lunch</label><br>
                                <input type="radio" id="rbDinner" name="meal_type" value="dinner">
                                <label for="rbDinner">Dinner</label><br>
                                <input type="radio" id="rbSnack" name="meal_type" value="snack">
                                <label for="rbSnack">Snack</label><br>
                                <input type="radio" id="rbWater" name="meal_type" value="water">
                                <label for="rbWater">Water</label><br><br>
                            </div>
                        <!-- Search Food -->
                            <div>
                                <h5>Enter Food Name:</h5>   
                                <form class = "d-none d-sm-inline-block form-inline mr-auto ml-md-3 my-2 my-md-0 mw-100 navbar-search" method="post" action="{% url 'tracker' %}">
                                    {% csrf_token %}
                                    <div>
                                        <input name="SearchFood" type="text" class="form-control bg-light border-0 small" placeholder="Search for..."
                                        aria-label="Search" aria-describedby="basic-addon2"><br>
                                    </div>
                                        <button class="btn btn-primary" type="submit">Search</button>
                                </form>
                                <br><br>
                                <ul>
                                    
                                    {% for food_name, nutrients in foods.items %}
                                        
                                        <input type="radio" id="{{food_name}}" name="meal_type" value="{{food_name}}">
                                        <b><label for="{{food_name}}">{{food_name}}</label></b><br>
                                        
                                        {% comment %} <button name="addFood" value={{food_name}} type="submit">{{food_name}}</button><br><br> {% endcomment %}
                                    
                                        {% for nutrient_name, amount_unit in nutrients.items %}
                                        {{nutrient_name}}:
                                        {% for value in amount_unit %}
                                        {{value}}
                                        {% endfor %}
                                        <br>
                                        {% endfor %}
                                        <br>
                                    {% endfor %}
                                    
                                </ul>
                            <!-- Submit success message-->
                            <div class="d-none" id="submitSuccessMessage">
                                <div class="text-center mb-3">
                                    <div class="fw-bolder">Food submission successful!</div>
                                </div>
                            </div>
                            <!-- Submit error message-->
                            <div class="d-none" id="submitErrorMessage"><div class="text-center text-danger mb-3">Error!</div></div>
                            <!-- Submit Button-->
                            <div class="d-grid"><button class="btn btn-primary btn-lg disabled" id="submitButton" type="submit">Submit</button></div>
                        </form>
                    </div>
                </div>
            </div>
            </div>
        </div>
    </section>
    </main>
    </div>
    <style>
        * {
          margin: 0;
          padding: 0;
          font-family: sans-serif;
        }
        .chartMenu {
          width: 100vw;
          height: 40px;
          background: #1A1A1A;
          color: rgba(255, 26, 104, 1);
        }
        .chartMenu p {
          padding: 10px;
          font-size: 20px;
        }
        .chartCard {
          width: 100vw;
          height: calc(100vh - 40px);
          background: 'white';
          display: flex;
          align-items: center;
          justify-content: center;
        }
        .chartBox {
          width: 80%;
          padding: 20px;
          border-radius: 20px;
          border: solid 3px white;
          background: white;
        }
      </style>
    </head>
    <body>
      
      <div class="chartCard">
        <div class="chartBox">
          <canvas id="myChart"></canvas>
        </div>
      </div>
      <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/chart.js"></script>
      <script>
      // setup 
      <style>
          .chartBox {
            width: 80%;
            border-radius: 20px;
            border: solid 3px white;
            background: white;
          }
</style>
    </head>
        <body>
            <div class="chartBox">
                <canvas id="myChart"></canvas>
            </div>
            <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/chart.js"></script>
            <script>
            // setup 
                const data = {
                    labels: ['Sodium(mg)', 'Protein(mg)', 'Water(ml)', 'Potassium(mg)', 'Phosphorus(mg)'],
                    datasets: [{
                        label: 'Daily Values',
                        data: dvData,
                        backgroundColor: [
                            'rgba(255, 26, 104, 0.2)'
                        ],
                        borderColor: [
                            'rgba(255, 26, 104, 1)'
                        ],
                        borderWidth: 1
                        },{
                            label: 'Daily Intake',
                            data: [2000, 400, 3000, 2700, 500],
                            backgroundColor: [
                                'rgba(54, 162, 235, 0.2)',
                            ],
                            borderColor: [
                                'rgba(54, 162, 235, 1)',
                            ],
                            borderWidth: 1
                        }]
                    };
    
        // config 
        const config = {
          type: 'bar',
          data,
          options: {
            scales: {
              y: {
                beginAtZero: true
              }
            }
          }
        };
    
        // render init block
        const myChart = new Chart(
          document.getElementById('myChart'),
          config
        );
        </script>
    
      </body>
    </html>
        

</script>
{% endblock %}